{% extends "base.html" %}

{% block content %}
{% block top %}{% endblock %}
<div>
<style>
    table {
        width: 100%;
        border-collapse: collapse;
    }
    table td, th {
        border:2px solid white;
        word-break: break-all;
    }
    tr:nth-child(even) {
        background-color: white;
    }
</style>
<p></p>
<table style="width:100%">
    <tr>
        <th>Link</th>
        <th>File Info</th>
        <th>Description</th>
    </tr>
    {% for file in files %}
    <tr>
        <td style="width:5%"><a href="download/" id="download">Download</a></td>
        <td id="fileinfo" style="width:25%">
            Filename: {{ file['filename'] }} <br>
            Size: {{ file['size'] }} bytes <br>
            Type: {{ file['type'] }} <br>
            Uploaded on: timehere
        </td>
        <td id="description" style="width:70%">{{ file['description'] }}</td>
        <p hidden id="uid">{{ file['uid'] }}</p>
        <p hidden id="time">{{file['time'] }}</p>
    </tr>
    {% endfor %}
</table>

<script>
while (1) {
    if (!document.getElementById('description')) {break;}
    document.getElementById('description').innerHTML = atob(document.getElementById('description').innerHTML);
    document.getElementById('description').id = 'filled';
    document.getElementById('fileinfo').innerHTML = document.getElementById('fileinfo').innerHTML.replace('timehere', new Date(parseFloat(document.getElementById('time').innerHTML) * 1000).toString().match(/(^[\w\s\:]+?)\:([\w:]+)/g)[0])
    document.getElementById('time').id = 'set'
    document.getElementById('fileinfo').id = 'fileinfoset'
    document.getElementById('download').href += document.getElementById('uid').innerHTML
    document.getElementById('uid').id = "uidset"
    document.getElementById('download').id = 'downloadset';
}
</script>
</div>
{% endblock %}
